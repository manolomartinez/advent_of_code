a â† â€¢Import "../../../Project Euler/aux.bqn"
m â† â€¢Import "/home/manolo/Software/BQN_cosas/bqn-libs/matrix.bqn"

Parse â† {
  l1â€¿l2â€¿l3 â† âˆ¾Â´((â‹ˆâŠ‘)â‹ˆ((Â¯1âŠ¸â†“â‹ˆÂ¯1âŠ¸âŠ‘)1âŠ¸â†“))ğ•©
  l1â†©'#'âŠ¸=Â¨('.'âŠ¸=âˆ¨'#'âŠ¸=)âŠ¸/l1
  l2â†©(â†•âˆ˜â‰ l1)âŠ¸âˆŠÂ¨(a.StrtoNatÂ¨',' a.Split('('âŠ¸â‰ âˆ§')'âŠ¸â‰ )âŠ¸/)Â¨ l2
  l3â†©a.StrtoNatÂ¨',' a.Split('{'âŠ¸â‰ âˆ§'}'âŠ¸â‰ )âŠ¸/ l3
  l1â€¿l2â€¿l3
}

machines â† ParseÂ¨ ' 'âŠ¸a.SplitÂ¨ â€¢FLines "./input.txt" 

Doable â† {
  ğ•¨ğ•Šl1â€¿l2â€¿l3:
  âˆ¨Â´(ğ•¨ <Ë˜âˆ˜a.Combinations â‰ l2){l1â‰¡2|+Â´ğ•¨âŠğ•©}Â¨<l2 
}

â€¢Show +Â´{ğ•Šm:1âŠ¸+â€¢_while_ {Â¬ğ•© Doable m} 1}Â¨ machines # part 1
